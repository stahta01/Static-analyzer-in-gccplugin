../Compiler/newplugin.so 11.2.0 
test.c: In function ‘foo’:
test.c:5:19: warning: implicit declaration of function ‘malloc’ [-Wimplicit-function-declaration]
    5 |     ptr1 = (int *)malloc(20);
      |                   ^~~~~~
test.c:1:1: note: include ‘<stdlib.h>’ or provide a declaration of ‘malloc’
  +++ |+#include <stdlib.h>
    1 | int *foo(void)
test.c:5:19: warning: incompatible implicit declaration of built-in function ‘malloc’ [-Wbuiltin-declaration-mismatch]
    5 |     ptr1 = (int *)malloc(20);
      |                   ^~~~~~
test.c:5:19: note: include ‘<stdlib.h>’ or provide a declaration of ‘malloc’
test.c: In function ‘changePtr’:
test.c:11:21: warning: incompatible implicit declaration of built-in function ‘malloc’ [-Wbuiltin-declaration-mismatch]
   11 |     int  a = (int *)malloc(40);
      |                     ^~~~~~
test.c:11:21: note: include ‘<stdlib.h>’ or provide a declaration of ‘malloc’
test.c:11:14: warning: initialization of ‘int’ from ‘int *’ makes integer from pointer without a cast [-Wint-conversion]
   11 |     int  a = (int *)malloc(40);
      |              ^
test.c:12:10: warning: assignment to ‘int *’ from ‘int’ makes pointer from integer without a cast [-Wint-conversion]
   12 |     *ptr = a; //改變指標變數的值，即改變localPtr存放的值
      |          ^
test.c: In function ‘main’:
test.c:36:5: warning: implicit declaration of function ‘printf’ [-Wimplicit-function-declaration]
   36 |     printf("%d\n", *localPtr); //經過changPtr函式，localPtr指標變數改指向
      |     ^~~~~~
test.c:1:1: note: include ‘<stdio.h>’ or provide a declaration of ‘printf’
  +++ |+#include <stdio.h>
    1 | int *foo(void)
test.c:36:5: warning: incompatible implicit declaration of built-in function ‘printf’ [-Wbuiltin-declaration-mismatch]
   36 |     printf("%d\n", *localPtr); //經過changPtr函式，localPtr指標變數改指向
      |     ^~~~~~
test.c:36:5: note: include ‘<stdio.h>’ or provide a declaration of ‘printf’
test.c:41:5: warning: implicit declaration of function ‘free’ [-Wimplicit-function-declaration]
   41 |     free(localPtr);
      |     ^~~~
test.c:41:5: note: include ‘<stdlib.h>’ or provide a declaration of ‘free’
test.c:41:5: warning: incompatible implicit declaration of built-in function ‘free’ [-Wbuiltin-declaration-mismatch]
test.c:41:5: note: include ‘<stdlib.h>’ or provide a declaration of ‘free’

Time variable                                   usr           sys          wall           GGC
 phase setup                        :   0.00 (  0%)   0.00 (  0%)   0.01 ( 50%)  1298k ( 86%)
 phase parsing                      :   0.01 (100%)   0.00 (  0%)   0.00 (  0%)   150k ( 10%)
 phase opt and generate             :   0.00 (  0%)   0.00 (  0%)   0.01 ( 50%)    46k (  3%)
 callgraph ipa passes               :   0.00 (  0%)   0.00 (  0%)   0.01 ( 50%)    28k (  2%)
 lto stream compression             :   0.00 (  0%)   0.00 (  0%)   0.01 ( 50%)     0  (  0%)
 parser function body               :   0.01 (100%)   0.00 (  0%)   0.00 (  0%)    14k (  1%)
 TOTAL                              :   0.01          0.00          0.02         1505k
../Compiler/newplugin.so 11.2.0 

Time variable                                   usr           sys          wall           GGC
 phase setup                        :   0.00 (  0%)   0.00 (  0%)   0.01 (100%)  2157k ( 99%)
 TOTAL                              :   0.00          0.00          0.01         2186k
../Compiler/newplugin.so 11.2.0 
=======ipa_pta=========
=============== The first stage : Point of interest stmt collect =================
=======node_fun:main=========
=============== The first stage :  record fucntion =================
start PointerConstraint
ptable point 2 
===============The second stage : Mapping stmt=================
# .MEM_17 = VDEF <.MEM_5>
_12 = malloc (40);
===============The second stage : Program slicing=================
=============== *this point analyzable =================
_12 = malloc (40);
===============The second stage : build fucntion type=================
[40;41mSTART CHECKSTART CHECKSTART CHECKSTART CHECKSTART CHECK[0m
[40;41mSTART CHECKSTART CHECKSTART CHECKSTART CHECKSTART CHECK[0m
    =()=
 ,/'_||_
  (___  `.
 ./  `=='
      |||
      |||
      |||
      |||
[40;41mSTART CHECKSTART CHECKSTART CHECKSTART CHECKSTART CHECK[0m
[40;41mSTART CHECKSTART CHECKSTART CHECKSTART CHECKSTART CHECK[0m

=============== The third stage : Start detection  =================
[40;44m =======node_fun:main========= [0m
[40;44m fucntion collect path  [0m
[40;44m =======print_function_path main  function_call count: 3 level :0========  [0m
[40;44m =======print_function_type 0  ========  [0m
[40;42m =======pre add _ fucntion:free========= [0m
[40;33m =======POP node_fun stack:free========= [0m
[40;42m =======pre add _ fucntion:printf========= [0m
[40;33m =======POP node_fun stack:printf========= [0m
[40;42m =======pre add _ fucntion:malloc========= [0m
[40;33m =======POP node_fun stack:malloc========= [0m
[40;42m =======pre_check_funciton:main========= [0m
[40;42m =======start_check_funciton:main========= [0m

dot graph START

======================================================================
 <ssa_name 0x7f3dad646af8
    type <pointer_type 0x7f3dad65a000
        type <void_type 0x7f3dad653f18 void VOID
            align:8 warn_if_not_align:0 symtab:0 alias-set -1 structural-equality
            pointer_to_this <pointer_type 0x7f3dad65a000>>
        public unsigned DI
        size <integer_cst 0x7f3dad63ebb8 constant 64>
        unit-size <integer_cst 0x7f3dad63ebd0 constant 8>
        align:64 warn_if_not_align:0 symtab:0 alias-set -1 structural-equality
        pointer_to_this <pointer_type 0x7f3dad65f9d8>>
   
    def_stmt _12 = malloc (40);
    version:12
    ptr-info 0x7f3dad164138>
# .MEM_17 = VDEF <.MEM_5>
_12 = malloc (40);

 ================== pre trace ptable ================== 
trace fucntion name:malloc 

 ================== pre trace ptable finish================== 

 ================== this stmt hava call fucntion ================== 
is Reserved word function :malloc
 
 Start check Pointer Collect  

======================================================================
_13 = (long int) _12;
In function ‘main’:
test.c:11:10: warning: use location
   11 |     int  a = (int *)malloc(40);
      |          ^
a_14 = (int) _13;
test.c:11:10: warning: use location
_15 = (long int) a_14;
test.c:12:10: warning: use location
   12 |     *ptr = a; //改變指標變數的值，即改變localPtr存放的值
      |          ^
_16 = (int *) _15;
test.c:12:10: warning: use location
_3 = localPtr_20;
test.c:41:5: warning: use location
   41 |     free(localPtr);
      |     ^
free (_3);
test.c:41:5: warning: use location
this stmt call this function :free

 ================== find free stmt ================== 
free (_3);
test.c:41:5: warning: use location
[40;32m    HAS FREE STMT count:1 name:free [0m

 ================== find free stmt ================== 
_1 = localPtr_20;
test.c:36:5: warning: use location
   36 |     printf("%d\n", *localPtr); //經過changPtr函式，localPtr指標變數改指向
      |     ^
_2 = *_1;
test.c:36:5: warning: use location
printf ("%d\n", _2);
test.c:36:5: warning: use location
this stmt call this function :printf
trace fucntion name:printf 

 ================== trace ================== 
trace fucntion free:1 
# .MEM_17 = VDEF <.MEM_5>
_12 = malloc (40);
_12 = malloc (40);
test.c:11:21: warning: use location
   11 |     int  a = (int *)malloc(40);
      |                     ^
this stmt call this function :malloc

 ================== Start Looserules free Check ================== 

 ================== warring ================== 
[40;35m   this module possiable false positives [0m

 ================== warring ================== 
 <ssa_name 0x7f3dad646af8
    type <pointer_type 0x7f3dad65a000
        type <void_type 0x7f3dad653f18 void VOID
            align:8 warn_if_not_align:0 symtab:0 alias-set -1 structural-equality
            pointer_to_this <pointer_type 0x7f3dad65a000>>
        public unsigned DI
        size <integer_cst 0x7f3dad63ebb8 constant 64>
        unit-size <integer_cst 0x7f3dad63ebd0 constant 8>
        align:64 warn_if_not_align:0 symtab:0 alias-set -1 structural-equality
        pointer_to_this <pointer_type 0x7f3dad65f9d8>>
   
    def_stmt _12 = malloc (40);
    version:12
    ptr-info 0x7f3dad164138>

 ================================================================= 
[40;35m <Looserules> find free stmt free same pointer [0m
# .MEM_9 = VDEF <.MEM_8>
free (_3);
test.c:41:5: warning: use location
   41 |     free(localPtr);
      |     ^

 ================== Start Use after free Check ================== 

dot graph END
 
 Finish check Pointer Collect  

======================================================================
[40;35m  	Looserules free count:1 [0m
[40;31m  	free count:1 [0m

======================================================================

======================================================================
[40;32m   No memory leak, need more check!  [0m

======================================================================


======================================================================

dot graph START

======================================================================
 <ssa_name 0x7f3dad646af8
    type <pointer_type 0x7f3dad65a000
        type <void_type 0x7f3dad653f18 void VOID
            align:8 warn_if_not_align:0 symtab:0 alias-set -1 structural-equality
            pointer_to_this <pointer_type 0x7f3dad65a000>>
        public unsigned DI
        size <integer_cst 0x7f3dad63ebb8 constant 64>
        unit-size <integer_cst 0x7f3dad63ebd0 constant 8>
        align:64 warn_if_not_align:0 symtab:0 alias-set -1 structural-equality
        pointer_to_this <pointer_type 0x7f3dad65f9d8>>
   
    def_stmt _12 = malloc (40);
    version:12
    ptr-info 0x7f3dad164138>
# .MEM_17 = VDEF <.MEM_5>
_12 = malloc (40);

 ================== pre trace ptable ================== 
trace fucntion name:malloc 

 ================== pre trace ptable finish================== 

 ================== this stmt hava call fucntion ================== 
is Reserved word function :malloc
 
 Start check Pointer Collect  

======================================================================
_13 = (long int) _12;
test.c:11:10: warning: use location
   11 |     int  a = (int *)malloc(40);
      |          ^
a_14 = (int) _13;
test.c:11:10: warning: use location
_15 = (long int) a_14;
test.c:12:10: warning: use location
   12 |     *ptr = a; //改變指標變數的值，即改變localPtr存放的值
      |          ^
_16 = (int *) _15;
test.c:12:10: warning: use location
_3 = localPtr_20;
test.c:41:5: warning: use location
   41 |     free(localPtr);
      |     ^
free (_3);
test.c:41:5: warning: use location
this stmt call this function :free

 ================== find free stmt ================== 
free (_3);
test.c:41:5: warning: use location
[40;32m    HAS FREE STMT count:1 name:free [0m

 ================== find free stmt ================== 
_1 = localPtr_20;
test.c:36:5: warning: use location
   36 |     printf("%d\n", *localPtr); //經過changPtr函式，localPtr指標變數改指向
      |     ^
_2 = *_1;
test.c:36:5: warning: use location
printf ("%d\n", _2);
test.c:36:5: warning: use location
this stmt call this function :printf
trace fucntion name:printf 

 ================== trace ================== 
trace fucntion free:1 
# .MEM_17 = VDEF <.MEM_5>
_12 = malloc (40);
_12 = malloc (40);
test.c:11:21: warning: use location
   11 |     int  a = (int *)malloc(40);
      |                     ^
this stmt call this function :malloc

 ================== Start Looserules free Check ================== 

 ================== warring ================== 
[40;35m   this module possiable false positives [0m

 ================== warring ================== 
 <ssa_name 0x7f3dad646af8
    type <pointer_type 0x7f3dad65a000
        type <void_type 0x7f3dad653f18 void VOID
            align:8 warn_if_not_align:0 symtab:0 alias-set -1 structural-equality
            pointer_to_this <pointer_type 0x7f3dad65a000>>
        public unsigned DI
        size <integer_cst 0x7f3dad63ebb8 constant 64>
        unit-size <integer_cst 0x7f3dad63ebd0 constant 8>
        align:64 warn_if_not_align:0 symtab:0 alias-set -1 structural-equality
        pointer_to_this <pointer_type 0x7f3dad65f9d8>>
   
    def_stmt _12 = malloc (40);
    version:12
    ptr-info 0x7f3dad164138>

 ================================================================= 
[40;35m <Looserules> find free stmt free same pointer [0m
# .MEM_9 = VDEF <.MEM_8>
free (_3);
test.c:41:5: warning: use location
   41 |     free(localPtr);
      |     ^

 ================== Start Use after free Check ================== 

dot graph END
 
 Finish check Pointer Collect  

======================================================================
[40;35m  	Looserules free count:1 [0m
[40;31m  	free count:1 [0m

======================================================================

======================================================================
[40;32m   No memory leak, need more check!  [0m

======================================================================


======================================================================
[40;33m =======POP node_fun stack:main========= [0m
fucntion collect path finsh

=============== The third stage : detection  End=================

===============Print ALL GIMPLE IR=================
=======Mapping node_fun:main=========
=======is loop:0=========

 bb index 2 
<bb 2> [local count: 1073741824]:
localValue = 1;
localPtr_19 = &localValue;
_12 = malloc (40);
_13 = (long int) _12;
a_14 = (int) _13;
_15 = (long int) a_14;
_16 = (int *) _15;
localPtr_20 = _16;
_1 = localPtr_20;
_2 = *_1;
printf ("%d\n", _2);
_3 = localPtr_20;
free (_3);
localValue ={v} {CLOBBER};
return 0;


===============Print ALL GIMPLE IR=================
[40;32mSTART CHECKSTART CHECKSTART CHECKSTART CHECKSTART CHECK[0m
[40;32mSTART CHECKSTART CHECKSTART CHECKSTART CHECKSTART CHECK[0m
    =()=
 ,/'_||_
  (___  `.
 ./  `=='
                   
    ~~~~~~~~~~~  
 ~~~~~~
           ~~~~~~~
[40;34m    gimple malloc count : 1 [0m
[40;34m    gimple free   count : 1 [0m
[40;34m    all ptable point : 3 [0m
[40;34m    analyzable ptable point : 1 [0m
[40;34m    used_stmt array stack totalsize of : 0.000208 mb[0m
[40;34m    collect time: : 0.000197 s [0m
[40;34m    algorithm time: 0.003937 s [0m
[40;34m    gimple stmt count : : 15 [0m
[40;34m    this report analysis in Fri Feb 18 05:56:07 2022
 [0m
[40;32mSTART CHECKSTART CHECKSTART CHECKSTART CHECKSTART CHECK[0m
[40;32mSTART CHECKSTART CHECKSTART CHECKSTART CHECKSTART CHECK[0m

Time variable                                   usr           sys          wall           GGC
 phase setup                        :   0.00 (  0%)   0.00 (  0%)   0.00 (  0%)  2157k ( 95%)
 phase opt and generate             :   0.01 (100%)   0.01 (100%)   0.02 (100%)    90k (  4%)
 callgraph functions expansion      :   0.00 (  0%)   0.01 (100%)   0.01 ( 50%)    57k (  3%)
 integration                        :   0.01 (100%)   0.00 (  0%)   0.00 (  0%)  2512  (  0%)
 dominator optimization             :   0.00 (  0%)   0.01 (100%)   0.00 (  0%)   384  (  0%)
 expand                             :   0.00 (  0%)   0.00 (  0%)   0.01 ( 50%)  3760  (  0%)
 plugin execution                   :   0.00 (  0%)   0.00 (  0%)   0.01 ( 50%)    32  (  0%)
 TOTAL                              :   0.01          0.01          0.02         2271k
